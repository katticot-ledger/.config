# ===============================
# ğŸš€ Tmux Configuration File ğŸš€
# ===============================

# ======================
# ğŸ”§ General Settings
# ======================
set -g mouse on                                        # ğŸ–±ï¸ Enable mouse support
set -g base-index 1                                    # ğŸ”¢ Start windows at index 1
set -g pane-base-index 1                              # ğŸ”¢ Start panes at index 1
set-window-option -g pane-base-index 1                # ğŸ”¢ Start panes at index 1
set-option -g renumber-windows on                     # ğŸ”„ Renumber windows automatically
set-option -g default-shell /opt/homebrew/bin/fish    # ğŸŸ Set fish shell

# ======================
# ğŸ¨ Theme & Appearance
# ======================
# True color support
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Status bar position and styling
set-option -g status-position top
set-option -g status-justify left
set-option -g status-style bg=#1e1e2e,fg=#cdd6f4
set-option -g status-left-length 100
set-option -g status-right-length 100

# Left status - Session info with modern styling
set-option -g status-left "#[fg=#1e1e2e,bg=#89b4fa,bold] ó°‡˜ #S #[fg=#89b4fa,bg=#313244] #[fg=#cdd6f4,bg=#313244] #I:#P #[fg=#313244,bg=#1e1e2e]"

# Right status - Date and time with clean separators
set-option -g status-right "#[fg=#313244,bg=#1e1e2e]#[fg=#cdd6f4,bg=#313244] %Y-%m-%d #[fg=#45475a,bg=#313244]â”‚#[fg=#cdd6f4,bg=#313244] %H:%M #[fg=#89b4fa,bg=#313244]#[fg=#1e1e2e,bg=#89b4fa,bold] ó°¥” "

# Window status styling - inactive windows
set-option -g window-status-format " #[fg=#bac2de,bg=#313244]â”€â”€ #W â”€â”€#[fg=#313244,bg=#1e1e2e] "

# Window status styling - active window
set-option -g window-status-current-format " #[fg=#1e1e2e,bg=#f38ba8,bold]â”€â”€ ğŸŒŸ #W â”€â”€#[fg=#f38ba8,bg=#1e1e2e] "

# Window status separator
set-option -g window-status-separator ""

# Pane border styling - modern and subtle
set-option -g pane-border-style fg=#313244
set-option -g pane-active-border-style fg=#89b4fa

# Pane border format with indicators
set-option -g pane-border-format "#[fg=#89b4fa,bg=#1e1e2e] #{?pane_active,#[bold],}#P: #{pane_current_command} #[fg=#45475a]#{pane_current_path} "
set-option -g pane-border-status off

# Message styling
set-option -g message-style bg=#89b4fa,fg=#1e1e2e,bold
set-option -g message-command-style bg=#89b4fa,fg=#1e1e2e,bold

# Copy mode styling
set-option -g mode-style bg=#f38ba8,fg=#1e1e2e

# Clock mode
set-option -g clock-mode-colour "#89b4fa"
set-option -g clock-mode-style 24

# Terminal overrides for better support
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

# ======================
# ğŸ”„ Key Bindings
# ======================
# Unbind default keys
unbind r
unbind f
unbind b
unbind p

# Session switching shortcuts
bind-key b switch-client -t basic     # â¬…ï¸ Switch to 'basic' session
bind-key o switch-client -t obsidian  # ğŸ““ Switch to 'obsidian' session
bind-key p switch-client -t perso     # ğŸ‘¤ Switch to 'perso' session
bind-key f switch-client -t front     # â¡ï¸ Switch to 'front' session

# Configuration reload
bind r source-file ~/.config/tmux/tmux.conf \; display-message "âœ… Config reloaded!"

# Window management
bind-key & kill-window                # âŒ Close window without confirmation

# Vim-style pane navigation
bind h select-pane -L                 # â¬…ï¸ Select left pane
bind j select-pane -D                 # â¬‡ï¸ Select down pane
bind k select-pane -U                 # â¬†ï¸ Select up pane
bind l select-pane -R                 # â¡ï¸ Select right pane

# Custom pane creation with auto-kill logic
bind C {
    splitw -f -h -l70% ''
    set-hook -p pane-mode-changed 'if -F "#{!=:#{pane_mode},copy-mode}" "kill-pane"'
    copy-mode -s'{last}'
}

# ======================
# ğŸ”Œ Plugin Management
# ======================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'laktak/extrakto'
set -g @plugin 'sainnhe/tmux-fzf'

# ======================
# ğŸ¨ Plugin Configuration
# ======================
# Extrakto - better text extraction
set -g @extrakto_split_size "15"
set -g @extrakto_grab_area "window recent"

# ======================
# ğŸ’¾ Session Persistence
# ======================
set -g @continuum-restore 'on'
set -g @resurrect-dir '~/.config/tmux/resurrect'
set -g @resurrect-processes 'false'  # Don't restore any processes (vim, etc)
set -g @resurrect-capture-pane-contents 'off'  # Don't restore pane contents

# ======================
# ğŸš€ Initialize TPM
# ======================
run-shell "$HOME/.config/tmux/plugins/tpm/tpm"
