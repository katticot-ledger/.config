# ===============================
# ğŸš€ Tmux Configuration File ğŸš€
# ===============================

# ======================
# ğŸ”§ General Settings
# ======================
set -g mouse on                                        # ğŸ–±ï¸ Enable mouse support
set -g base-index 1                                    # ğŸ”¢ Start windows at index 1
set -g pane-base-index 1                              # ğŸ”¢ Start panes at index 1
set-window-option -g pane-base-index 1                # ğŸ”¢ Start panes at index 1
set-option -g renumber-windows on                     # ğŸ”„ Renumber windows automatically
set-option -g default-shell /opt/homebrew/bin/fish    # ğŸŸ Set fish shell

# ======================
# ğŸ¨ Theme & Appearance
# ======================
# Status bar position and colors
set-option -g status-position top
set-option -g status-justify centre
set-option -g status-bg '#282a36'
set-option -g status-fg '#f8f8f2'

# Status bar content
set -g status-left-length 40
set -g status-left "#[fg=#8be9fd] #[bold]#S #[fg=#f8f8f2]|"
set -g status-right-length 80
set -g status-right "#[fg=#f1fa8c]ó°¥” %Y-%m-%d #[fg=#ff79c6] %H:%M #[fg=#50fa7b]âœ”"

# Window status styling
setw -g window-status-format " #[fg=#bd93f9]ó°“© #I:#W "
setw -g window-status-current-format " #[bold,fg=#ffb86c]ó°®¯ #I:#W "

# Pane border styling
set-option -g pane-border-style fg='#44475a'
set-option -g pane-active-border-style fg='#ff79c6'

# Message box styling
set-option -g message-style bg='#ff79c6',fg='#f8f8f2'
set-option -g message-command-style bg='#ff79c6',fg='#f8f8f2'

# Terminal overrides for better support
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'

# ======================
# ğŸ”„ Key Bindings
# ======================
# Unbind default keys
unbind r
unbind f
unbind b
unbind p

# Session switching shortcuts
bind-key b switch-client -t basic     # â¬…ï¸ Switch to 'basic' session
bind-key o switch-client -t obsidian  # ğŸ““ Switch to 'obsidian' session
bind-key p switch-client -t perso     # ğŸ‘¤ Switch to 'perso' session
bind-key f switch-client -t front     # â¡ï¸ Switch to 'front' session

# Configuration reload
bind r source-file ~/.config/tmux/tmux.conf \; display-message "âœ… Config reloaded!"

# Window management
bind-key & kill-window                # âŒ Close window without confirmation

# Vim-style pane navigation
bind h select-pane -L                 # â¬…ï¸ Select left pane
bind j select-pane -D                 # â¬‡ï¸ Select down pane
bind k select-pane -U                 # â¬†ï¸ Select up pane
bind l select-pane -R                 # â¡ï¸ Select right pane

# Custom pane creation with auto-kill logic
bind C {
    splitw -f -l30% ''
    set-hook -p pane-mode-changed 'if -F "#{!=:#{pane_mode},copy-mode}" "kill-pane"'
    copy-mode -s'{last}'
}

# ======================
# ğŸ”Œ Plugin Management
# ======================
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'laktak/extrakto'
set -g @plugin 'dracula/tmux'

# ======================
# ğŸŒ™ Dracula Theme Config
# ======================
set -g @dracula-show-powerline true
set -g @dracula-plugins "weather"
set -g @dracula-show-fahrenheit false
set -g @dracula-fixed-location "Paris"
set -g @dracula-day-month true
set -g @dracula-show-flags true
set -g @dracula-show-left-icon session

# ======================
# ğŸ’¾ Session Persistence
# ======================
set -g @continuum-restore 'on'
set -g @resurrect-dir '~/.config/tmux/resurrect'

# ======================
# ğŸš€ Initialize TPM
# ======================
run-shell "$HOME/.config/tmux/plugins/tpm/tpm"